﻿﻿﻿@model IEnumerable<DiplomaWebSite.Models.Choice>
@section scripts{
    <script src="@Url.Content("~/wwwroot/js/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>



    <script type="text/javascript">
    $(document).ready(function () {
         $("#dvChoiceResults").load('@(Url.Action("GetChoices","Choices",null, null))');
         $("#dvChartPartial").load('@(Url.Action("GetChart","Choices",null, null))');
    });
    
    function OnChange(termId) {
        $("#dvChoiceResults").load('@(Url.Action("GetChoices","Choices",null, null))?yeartermid=' + termId);
         $("#dvChartPartial").load('@(Url.Action("GetChart","Choices",null, null))?yeartermid=' + termId);
         
    }
    </script>
}
@{
    ViewBag.Title = "Choices";
}

<h2>Index</h2>


<p>Select another term: @Html.DropDownList("yearTerms", null, "select term...", htmlAttributes: new {id= "yearTermSelected", @class = "form -control", @onchange = "javascript:OnChange(this.value);" } )</p>
  
  <div id="dvChoiceResults">
        @{ await Html.RenderPartialAsync("_IndexPartial");}
  </div>
   <div id="dvChartPartial">
       
        
  </div>